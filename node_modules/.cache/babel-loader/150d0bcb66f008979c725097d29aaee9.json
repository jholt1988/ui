{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Deferred = void 0;\n\nconst TimeoutError_1 = require(\"./TimeoutError\");\n\nclass Deferred {\n  constructor() {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._resolve = resolve;\n    });\n  }\n\n  registerTimeout(timeoutInMillis, callback) {\n    if (this._timeout) return;\n    this._timeout = setTimeout(() => {\n      callback();\n      this.reject(new TimeoutError_1.TimeoutError('Operation timeout'));\n    }, timeoutInMillis);\n  }\n\n  _clearTimeout() {\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n  }\n\n  resolve(value) {\n    this._clearTimeout();\n\n    this._resolve(value);\n  }\n\n  reject(error) {\n    this._clearTimeout();\n\n    this._reject(error);\n  }\n\n  promise() {\n    return this._promise;\n  }\n\n}\n\nexports.Deferred = Deferred;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAOA,MAAaA,QAAb,CAAqB;AAMnBC;AACE,SAAKC,QAAL,GAAgB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;AAC9C,WAAKC,OAAL,GAAeD,MAAf;AACA,WAAKE,QAAL,GAAgBH,OAAhB;AACD,KAHe,CAAhB;AAID;;AAEDI,iBAAe,CAACC,eAAD,EAA0BC,QAA1B,EAA4C;AACzD,QAAI,KAAKC,QAAT,EAAmB;AAEnB,SAAKA,QAAL,GAAgBC,UAAU,CAAC,MAAK;AAC9BF,cAAQ;AACR,WAAKL,MAAL,CAAY,IAAIQ,2BAAJ,CAAiB,mBAAjB,CAAZ;AACD,KAHyB,EAGvBJ,eAHuB,CAA1B;AAID;;AAESK,eAAa;AACrB,QAAI,CAAC,KAAKH,QAAV,EAAoB;AACpBI,gBAAY,CAAC,KAAKJ,QAAN,CAAZ;AACD;;AAEDP,SAAO,CAACY,KAAD,EAAS;AACd,SAAKF,aAAL;;AACA,SAAKP,QAAL,CAAcS,KAAd;AACD;;AAEDX,QAAM,CAACY,KAAD,EAAa;AACjB,SAAKH,aAAL;;AACA,SAAKR,OAAL,CAAaW,KAAb;AACD;;AAEDC,SAAO;AACL,WAAO,KAAKhB,QAAZ;AACD;;AAvCkB;;AAArBiB","names":["Deferred","constructor","_promise","Promise","resolve","reject","_reject","_resolve","registerTimeout","timeoutInMillis","callback","_timeout","setTimeout","TimeoutError_1","_clearTimeout","clearTimeout","value","error","promise","exports"],"sources":["../src/Deferred.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}